<p-toast></p-toast>
<nav style="height: 180px; background-color: white; padding-left: 0;" class="navbar navbar-expand shadow fixed-top"
  [ngClass]="isSticky ? 'navbar-sticky':'navbar'">
  <div class="container-fluid" style="position: absolute; top:0; display: flex; flex-direction: column;">
    <div class="toolbar" role="banner" [ngStyle]="{'background-color': bizService.get_background_color()}">

      <a class="promotion-text" target="_blank" href="{{bizService.get_left_link()}}"
        *ngIf="checkLeftHeaderLink()">{{bizService.get_left_header()}}</a>
      <span class="promotion-text" *ngIf="!checkLeftHeaderLink()">{{bizService.get_left_header()}}</span>
      <div class="spacer"></div>
      <a class="promotion-text-right" target="_blank" href="{{bizService.get_right_link()}}"
        *ngIf="rightHeaderLink">{{bizService.get_right_header()}}</a>
      <span class="promotion-text-right" *ngIf="!rightHeaderLink">{{bizService.get_right_header()}}</span>

    </div>
    <div class="header-container-mobile" style="display: flex; padding-top: 30px; width: 100%;">

      <button type="button" style="width: fit-content;border: none; outline: none; background-color:transparent;"
        class="hamburger-menu" data-toggle="modal" data-target="#menuModal">
        <hr class="hamburger-line">
        <hr class="hamburger-line">
        <hr class="hamburger-line">
      </button>

      <div class="navbar-brand" style="min-width: 280px;z-index: 1040;">
        <a class="logo" routerLink="/{{bizService.getBizName()}}">
          <img src="{{bizService.get_company_logo()}}" style="height:50px" />
        </a>
      </div>
      <div class="navbar-brand-mobile" style="min-width: 200px;z-index: 1040;">
        <a class="logo" routerLink="/{{bizService.getBizName()}}">
          <img src="{{bizService.get_company_logo()}}" style="height:50px" />
        </a>
      </div>
      <div class="collapse navbar-collapse" id="navbarSupportedContent" style="position: relative;">
        <form class="d-flex flex-fill" style="justify-content: center; z-index: 1000; margin-right: 10px;" role="search"
          [formGroup]="searchForm">
          <div class="input-group">

            <input style="padding-left:20px; border-color: #C1C7D6; border-left: 1px solid #C1C7D6;"
              formControlName="search" type="text" class="form-control bg-transparent search-bar-input rounded-pill"
              placeholder="Search ..." aria-label="search" aria-describedby="basic-addon1"
              (keydown.enter)="searchClick()">
            <span style="margin-left: -70px; border: none;"
              class="input-group-text bg-transparent  search-bar-icon rounded-pill" id="basic-addon1"
              (click)="searchClick()"><i class="bi bi-search"></i></span>
          </div>
        </form>
        <div class="top-menu" style="padding-top: 70px; width: 100%;">
          <div class="top-menu-item" hoverActivatedNavMenu (mouseenter)="onMouseEnterTopMenu(cat.id)"
            (mouseleave)="onMouseLeaveTopMenu()" *ngFor="let cat of categories; let i=index;">

            <span hoverActivatedNavMenu style="display: block;width: fit-content;">

              <div (click)="changeCategory(cat.name)" style="cursor: pointer;"> <a style="text-decoration: none;"
                  class="TopNav_topNavLink_13"
                  [ngStyle]="getTopMenuHoverStyle(cat.id)">{{navbarCategoryFormat(cat.name)}}</a></div>
              <div
                style="max-width: 976px; min-width: 976px; animation-delay: 0ms;background-color:white;box-shadow: 0 4px 2px -2px rgba(0, 0, 0, 0.2); left: calc((100% - 976px) / 2); border-radius: 10px;"
                class="TopNav_dropDown_5f" hoverActivatedNavMenu>
                <!-- <div class="row"
                style="height:1px;background-color: rgb(53, 51, 51);margin-top: 10px;width:100%;margin-left: 0px;margin-right: 0px;">
              </div> -->
                <div class="TopNav_retailDropDown_14">
                  <div style="max-height: 620px;" class="DropDown_subMenu_a5">

                    <div (click)="changeCategory(cat.name)" class="row"
                      style="width: 100%;margin-left: 0px;margin-right: 0px; cursor: pointer;">
                      <h6
                        style="text-align: start;padding-left: 10px;padding-right: 0px; font-weight: bold; margin-bottom: 10px;">
                        {{navbarCategoryFormat(cat.name)}}</h6>
                    </div>
                    <br>
                    <!-- <ng-container style="display: flex; flex-direction: column;" *ngFor="let sub of sub_categories">
                      <div style="display: flex; flex-direction: column;" >
                        <span *ngIf="sub.category==cat.id" style="padding-left: 10px; font-size: medium;">{{sub.name}}</span>
                        <a routerLink="/{{bizService.getBizId()}}/products/{{cat.name}}/{{sub.name}}/"
                        class="DropDown_columnLink_c4 DropDown_columnTitle_ec">{{sub.name}}</a>
                        <ng-container *ngFor="let pdt of products">
                          <a routerLink="/{{bizService.getBizId()}}/product/{{pdt.id}}" class="DropDown_columnLink_c4"
                            tabindex="-1" *ngIf="pdt.product.sub_category==sub.id">
                            <img
                            [src]="pdt.product.images[0].image" *ngIf="pdt.product.images.length!=0" width="32px"
                            height="32px" 
                          />
                            <span style="padding-left: 10px;">{{pdt.product.name}}</span></a>
                        </ng-container>

                      </div>
                    </ng-container> -->
                    <div style="display: flex; flex-direction: column; align-items: flex-start;">
                      <ng-container *ngFor="let sub of sub_categories">
                        <div *ngIf="sub.category === cat.id" (click)="changeSubCategory(cat.name,sub.name)"
                          style="padding-left: 10px; font-size: medium; cursor: pointer;">
                          {{ sub.name }}
                        </div>
                      </ng-container>
                    </div>

                  </div>
                </div>
              </div>
              <div id="hdShim" class="header_shim_0c" mouseOutHideNavMenu></div>
            </span>


          </div>
        </div>
      </div>
      <ul *ngIf="type!==catalog" class="navbar-nav mx-3 gap-2">
        <li class="nav-item menu-button" (mouseenter)="onMouseEnterCartMenu()" (mouseleave)="onMouseLeaveCartMenu()">
          <button type="button" class="nav-link btn position-relative">
            <a routerLink="/{{bizService.getBizId()}}/cart">
              <span class="unhovered">
                <!-- <i class="bi bi-cart" style="color: black; font-size: 32px; font-weight: 600;"></i> -->
                <!-- <i class="fa-solid fa-cart-shopping" style="color: #555;font-size: 24px; font-family: 'Font Awesome 6 Free';"></i> -->
                <svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">

                  <g id="SVGRepo_bgCarrier" stroke-width="0" />

                  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" />

                  <g id="SVGRepo_iconCarrier">
                    <path
                      d="M6.29977 5H21L19 12H7.37671M20 16H8L6 3H3M9 20C9 20.5523 8.55228 21 8 21C7.44772 21 7 20.5523 7 20C7 19.4477 7.44772 19 8 19C8.55228 19 9 19.4477 9 20ZM20 20C20 20.5523 19.5523 21 19 21C18.4477 21 18 20.5523 18 20C18 19.4477 18.4477 19 19 19C19.5523 19 20 19.4477 20 20Z"
                      stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                  </g>

                </svg>
              </span>
              <span class="hovered">
                <!-- <i class="fa-solid fa-cart-shopping" style="color: #555;font-size: 24px; font-family: 'Font Awesome 6 Free';"></i> -->
                <svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">

                  <g id="SVGRepo_bgCarrier" stroke-width="0" />

                  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" />

                  <g id="SVGRepo_iconCarrier">
                    <path
                      d="M6.29977 5H21L19 12H7.37671M20 16H8L6 3H3M9 20C9 20.5523 8.55228 21 8 21C7.44772 21 7 20.5523 7 20C7 19.4477 7.44772 19 8 19C8.55228 19 9 19.4477 9 20ZM20 20C20 20.5523 19.5523 21 19 21C18.4477 21 18 20.5523 18 20C18 19.4477 18.4477 19 19 19C19.5523 19 20 19.4477 20 20Z"
                      [style.stroke]="bizService.get_background_color()" stroke-width="2" stroke-linecap="round"
                      stroke-linejoin="round" />
                  </g>

                </svg>
              </span>
            </a>
            <span class="position-absolute top-0 start-100 translate-middle mt-2 badge" [ngStyle]="getBackgroundStyle()"
              *ngIf="userInfoService.getCartItems().length>0">
              <span>{{userInfoService.getCartItems().length}}</span>
              <span class="visually-hidden"></span>

            </span>
            <a routerLink="/{{bizService.getBizId()}}/cart" style="text-decoration: none;">
              <span class="menu-text" [ngStyle]="getCartMenuHoverStyle()">Cart</span>
            </a>
          </button>
        </li>
        <li class="nav-item" (mouseenter)="onMouseEnterUserMenu()" (mouseleave)="onMouseLeaveUserMenu()">
          <!-- <button type="button" class="nav-link btn position-relative">
              <i class="bi bi-chat-square-text fs-5"></i>
              <span class="position-absolute top-0 start-100 translate-middle mt-2 badge bg-danger">
                9+
                <span class="visually-hidden">unread messages</span>
              </span>
            </button> -->




          <div class="nav-item dropdown menu-button account-menu" style="height: 40px;">
            <span class="nav-link dropdown-toggle" style="cursor: pointer;" data-bs-toggle="dropdown">
              <span class="unhovered">
                <svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">

                  <g id="SVGRepo_bgCarrier" stroke-width="0" />

                  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" />

                  <g id="SVGRepo_iconCarrier">
                    <g id="User / User_Circle">
                      <path id="Vector"
                        d="M17.2166 19.3323C15.9349 17.9008 14.0727 17 12 17C9.92734 17 8.06492 17.9008 6.7832 19.3323M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21ZM12 14C10.3431 14 9 12.6569 9 11C9 9.34315 10.3431 8 12 8C13.6569 8 15 9.34315 15 11C15 12.6569 13.6569 14 12 14Z"
                        stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </g>
                  </g>

                </svg>
              </span>
              <span class="hovered">
                <svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">

                  <g id="SVGRepo_bgCarrier" stroke-width="0" />

                  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" />

                  <g id="SVGRepo_iconCarrier">
                    <g id="User / User_Circle">
                      <path id="Vector"
                        d="M17.2166 19.3323C15.9349 17.9008 14.0727 17 12 17C9.92734 17 8.06492 17.9008 6.7832 19.3323M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21ZM12 14C10.3431 14 9 12.6569 9 11C9 9.34315 10.3431 8 12 8C13.6569 8 15 9.34315 15 11C15 12.6569 13.6569 14 12 14Z"
                        [style.stroke]="bizService.get_background_color()" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                    </g>
                  </g>

                </svg>
              </span>
              <span class="menu-text" [ngStyle]="getUserMenuHoverStyle()">Account</span>
            </span>
            <div class="dropdown-menu" style="left:auto;right:0">

              <span style="cursor: pointer;" class="dropdown-item">My Account</span>
              <a href="#" class="dropdown-item">
                <div style="border: 1px solid black;width: 100%;"></div>
              </a>
              <a href="#" class="dropdown-item">{{user_info.name}}</a>
              <a routerLink="/{{bizService.getBizId()}}/my-orders" class="dropdown-item">
                <span style="padding-right: 10px;padding-left: 2px;"><i class="fa fa-list"
                    style="font-size: 18px;color: black;"></i></span>My Orders

              </a>
              <a routerLink="/{{bizService.getBizId()}}/account" class="dropdown-item ">
                <span style="padding-right: 4px;">
                  <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">

                    <g id="SVGRepo_bgCarrier" stroke-width="0" />

                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" />

                    <g id="SVGRepo_iconCarrier">
                      <g id="User / User_Circle">
                        <path id="Vector"
                          d="M17.2166 19.3323C15.9349 17.9008 14.0727 17 12 17C9.92734 17 8.06492 17.9008 6.7832 19.3323M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21ZM12 14C10.3431 14 9 12.6569 9 11C9 9.34315 10.3431 8 12 8C13.6569 8 15 9.34315 15 11C15 12.6569 13.6569 14 12 14Z"
                          stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      </g>
                    </g>

                  </svg>
                </span> Account Information
              </a>
              <a href="javascript:void(0);" class="dropdown-item" *ngIf="userInfoService.isLoggedIn()"
                (click)="logout()">Logout</a>
              <a href="javascript:void(0);" class="dropdown-item" *ngIf="!userInfoService.isLoggedIn()"
                (click)="login()">Login</a>

            </div>
          </div>
        </li>
      </ul>
      <button *ngIf="type===catalog" class="btn  buy-now-button" (click)="openContactUsModal()"
        style="border-radius: 50px; margin-right: 20px; height: 50px; margin-top: 5px;"
        [ngStyle]="{'background-color': bizService.get_background_color()}">
        <span style="color: white; padding-left: 20px; padding-right: 20px;">Contact Us</span></button>
      <!-- <button *ngIf="type===catalog" class="btn  buy-now-button" (click)="logInToBiz()"
        style="border-radius: 50px; margin-right: 20px; height: 50px; margin-top: 5px;"
        [ngStyle]="{'background-color': bizService.get_background_color()}">
        <span style="color: white; padding-left: 20px; padding-right: 20px;">LogIn</span></button> -->
    </div>
  </div>
</nav>

<div class="col-sm-2 col-lg-2 mt-4">
  <div class="modal-side-nav left-side-nav fade-side-nav" id="menuModal" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog-side-nav" role="document">
      <div class="modal-content-side-nav" style="background-color: white;">
        <div class="modal-header-side-nav"
          style="text-align: center;justify-content: center; font-weight: 700;padding-top: 20px;font-size: large;background-color: white;">
          <span style="width:100%;">{{bizService.getBizName()}}</span>
          <span style="margin-right: 20px;">
            <button type="button" style="background-color: white;border: none;" data-dismiss="modal">
              X
            </button></span>
        </div>

        <div class="modal-body-side-nav" style="padding-left: 30px; padding-top: 20px;">
          <div style="margin-bottom: 5px;" *ngFor="let cat of categories;">
            <div>
              <span (click)="changeCategory(cat.name)" data-dismiss="modal">{{cat.name}}</span>
              <!-- <i class="fa fa-caret-down" aria-hidden="true"></i> -->
            </div>
            <div style="padding-left: 15px;" *ngFor="let sub of sub_categories">
              <a *ngIf="sub.category==cat.id"
                routerLink="/{{bizService.getBizId()}}/products/{{cat.name}}/{{sub.name}}/"
                class="DropDown_columnLink_c4 DropDown_columnTitle_ec" data-dismiss="modal">{{sub.name}}</a>
            </div>
          </div>
          <div style="flex: 4; display: flex; align-items: flex-end;">
            <div style="display: flex; justify-self: flex-end; height: fit-content;">
              <div>
                <span class="unhovered">
                  <svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">

                    <g id="SVGRepo_bgCarrier" stroke-width="0" />

                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" />

                    <g id="SVGRepo_iconCarrier">
                      <g id="User / User_Circle">
                        <path id="Vector"
                          d="M17.2166 19.3323C15.9349 17.9008 14.0727 17 12 17C9.92734 17 8.06492 17.9008 6.7832 19.3323M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21ZM12 14C10.3431 14 9 12.6569 9 11C9 9.34315 10.3431 8 12 8C13.6569 8 15 9.34315 15 11C15 12.6569 13.6569 14 12 14Z"
                          stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                      </g>
                    </g>

                  </svg>
                </span>
              </div>
              <div>
                <span class="dropdown-item" style="cursor: pointer;">My Account</span>
                <a href="#" class="dropdown-item">{{user_info.name}}</a>
                <a routerLink="/{{bizService.getBizId()}}/my-orders" data-dismiss="modal" class="dropdown-item">
                  <span style=""></span>My Orders
                </a>
                <a routerLink="/{{bizService.getBizId()}}/account" data-dismiss="modal" class="dropdown-item ">
                  Account Information
                </a>
                <a href="javascript:void(0);" class="dropdown-item" data-dismiss="modal"
                  *ngIf="userInfoService.isLoggedIn()" (click)="logout()">Logout</a>
                <a href="javascript:void(0);" class="dropdown-item" data-dismiss="modal"
                  *ngIf="!userInfoService.isLoggedIn()" (click)="login()">Login</a>
              </div>
            </div>

          </div>
          <div style="display: flex; flex:1;"></div>
        </div>
      </div>
    </div>
  </div>
</div>